Ch. 6 INDEX

"데이터 검색 속도를 높이기 위한 색인 기술"인 인덱스의 원리와 생성, 장단점

---

1. 인덱스 (Index) 개념

- 정의: 테이블에 저장된 데이터를 빠르게 검색하기 위해 별도로 생성하는 오라클 객체. 책의 '색인'이나 '목차'와 같은 역할.
- 작동 원리:
    - 데이터의 값과 해당 데이터가 저장된 물리적 주소인 ROWID를 키-값 쌍으로 저장한다.
    - 검색 시 테이블 전체를 훑는 Full Table Scan 대신, 인덱스를 통해 위치를 바로 찾아가는 Index Scan을 수행하여 속도를 높인다.
    
    ---
    

2. 인덱스의 장단점 (Trade-off)

- 장점:
    - 검색(SELECT) 속도가 매우 빨라진다.
    - 시스템의 디스크 I/O 부하를 줄일 수 있다.
- 단점:
    - 인덱스를 위한 별도의 저장 공간이 필요.
    - DML(INSERT, UPDATE, DELETE) 작업 속도가 느려진다. (데이터 변경 시 인덱스도 함께 수정/정렬해야 하기 때문)
    
    ---
    

3. 인덱스의 종류

1. 고유 인덱스 (Unique Index): 중복된 값을 허용하지 않는 인덱스. (PK나 UNIQUE 제약조건 생성 시 자동으로 만들어짐.)
2. 비고유 인덱스 (Non-Unique Index): 중복된 값을 허용하며, 사용자가 직접 생성하는 일반적 인덱스.
3. 단일 인덱스 (Single Index): 하나의 컬럼으로만 구성된 인덱스.
4. 결합 인덱스 (Composite Index): 두 개 이상의 컬럼을 묶어 생성한 인덱스. (예: CREATE INDEX idx_name ON table(col1, col2);)
5. 함수 기반 인덱스 (Function-based Index): 컬럼의 값 자체가 아니라 연산 결과(예: sal * 12)를 기준으로 생성하는 인덱스.

---

4. 실습 내용 요약

실습 파일(1118_ch06_INDEX.sql)에서는 대량의 데이터를 생성하여 인덱스 유무에 따른 속도 차이를 확인.

A. 인덱스 정보 확인 (Data Dictionary)

- USER_INDEXES: 인덱스의 이름과 유일성 여부(UNIQUENESS) 등을 확인.
- USER_IND_COLUMNS: 인덱스가 어떤 컬럼에 적용되어 있는지 확인.
    - 실습 예시: EMP 테이블 복사본(EMP01)을 만들고 제약조건이 없을 때 인덱스가 없는 것을 확인함.

B. 인덱스 생성 및 테스트

1. 더미 데이터 생성: 인덱스의 효과를 체감하기 위해 PL/SQL 반복문을 사용하여 대량의 행(Row)을 입력.
    - 실습: INSERT INTO emp01 SELECT ... FROM emp01; 등을 반복하여 데이터 양을 불림.
2. 속도 비교 (Explain Plan):
    - 인덱스 생성 전: 특정 데이터를 조회할 때 테이블 전체를 읽는 Full Table Scan이 발생하며 속도가 느리다.
    - 인덱스 생성 후: CREATE INDEX idx_emp01_ename ON emp01(ename); 실행 후 조회하면 Index Range Scan이 발생하며 속도가 빨라진다.

C. 인덱스 삭제 및 관리

- DROP INDEX: 더 이상 필요 없거나 DML 성능 저하를 일으키는 인덱스를 삭제한다.
    - 문법: DROP INDEX 인덱스명;
- 인덱스 재생성 (Rebuild): 데이터의 잦은 변경으로 인덱스 공간이 조각나거나 불균형해졌을 때 성능 최적화를 위해 사용.
    - 문법: ALTER INDEX 인덱스명 REBUILD;
    
    ---
    

적용 가능한 상황

- 데이터 양이 많을 때 (수만 건 이상).
- WHERE 절이나 JOIN 조건에 자주 사용되는 컬럼일 때.
- 컬럼의 데이터 분포도(Cardinality)가 좋을 때 (데이터 값의 종류가 많을 때).
- 주의: 데이터 변경(DML)이 잦은 테이블에는 과도한 인덱스 생성을 피해야 한다.