Ch. 2 SELECT문 - 조회

DEMO.SQL 파일의 EMP 테이블 활용

DMBS Ch. 2 SELECT문 핵심 요약

- 데이터 질의어(DQL)의 핵심인 SELECT문의 사용법을 배우는 것이 목표.

---

1. SELECT 문의 기본 구조 (데이터 조회)

- SELECT: 조회하고자 하는 컬럼(Column)을 지정한다.
    - * (Asterisk): 모든 컬럼을 의미.
    - DISTINCT: 조회 결과에서 중복된 행을 제거. (기본값은 ALL )
    - AS (Alias): 컬럼명에 별칭을 부여한다. (예: sal AS "급여")
- FROM: 조회할 데이터가 있는 테이블(Table)을 지정한다.
- 산술 연산 / 문자열 연결:
    - SELECT 절에서 컬럼 값에 사칙연산(예: sal * 1.1)을 적용할 수 있다.
    - || 연산자 (Oracle)를 사용해 여러 컬럼이나 문자열을 하나로 합칠 수 있다 (예: ename || '의 직업은 ' || job).

---

2. WHERE 절 (데이터 필터링)

- WHERE: FROM 절 다음에 위치하며, 조회할 행(Row)을 선별하는 조건을 지정한다.
- 주요 연산자:
    - 비교 연산자: =, != (또는 <>), >, <, >=, <=
    - 논리 연산자: AND, OR, NOT을 사용해 여러 조건을 조합한다.
    - BETWEEN a AND b: a와 b 사이의 값(양 끝 포함)을 찾는다.
    - IN (list): 리스트에 포함된 값 중 하나와 일치하는 데이터를 찾는다.
    - LIKE: 문자열의 패턴 매칭을 수행.
        - %: 0개 이상의 문자를 의미 (예: ename LIKE 'S%' -> S로 시작하는 모든 이름 )
        - _: 1개의 문자를 의미
    - IS NULL / IS NOT NULL: NULL 값을 비교할 때 사용하는 전용 연산자 (= NULL은 사용 불가).

---

3. ORDER BY 절 (데이터 정렬)

- ORDER BY: 조회된 결과를 특정 컬럼 기준으로 정렬한다. SELECT문의 가장 마지막에 실행된다.
- 정렬 방식:
    - ASC (Ascending): 오름차순 (기본값)
    - DESC (Descending): 내림차순

---

4. 함수 (단일행 함수)

SELECT 절이나 WHERE 절에서 데이터를 가공하기 위해 사용되며, 한 행(Row)마다 개별적으로 적용.

- 문자 함수:
    - UPPER(), LOWER(): 대/소문자로 변환한다.
    - LENGTH(): 문자열의 길이를 반환한다.
- 숫자 함수:
    - ROUND(n, digits): n을 digits 자리에서 반올림한다.
    - TRUNC(n, digits): n을 digits 자리에서 버림(절사)한다.
    - MOD(n1, n2): n1을 n2로 나눈 나머지를 구한다.
- 날짜 함수:
    - SYSDATE: 현재 시스템의 날짜와 시간을 반환한다.
    - 날짜 간의 덧셈/뺄셈 등 산술 연산이 가능하다.
- NULL 처리 함수:
    - NVL(컬럼, 대체값) (Oracle): 컬럼 값이 NULL일 경우 지정된 대체값으로 치환한다.

---

5. 그룹 함수와 GROUP BY (데이터 집계)

여러 행(Row)을 묶어 하나의 결과(예: 평균, 총합)를 반환한다.

- 주요 그룹 함수 (집계 함수):
    - COUNT(): 행의 개수를 센다 (COUNT(*)는 NULL 포함, COUNT(컬럼)은 NULL 제외).
    - SUM(): 합계를 구한다.
    - AVG(): 평균을 구한다.
    - MAX(), MIN(): 최대값, 최소값을 구한다.
- GROUP BY 절:
    - 특정 컬럼(예: deptno)을 기준으로 데이터를 그룹화하여 그룹 함수를 적용한다.
    - SELECT 절에는 GROUP BY에 사용된 컬럼과 그룹 함수만 올 수 있다.
- HAVING 절:
    - GROUP BY로 생성된 그룹 자체에 대한 조건(필터링)을 지정한다 (예: HAVING AVG(sal) >= 2000).
    - WHERE 절(행 필터링)이 GROUP BY보다 먼저 실행되고, HAVING 절(그룹 필터링)이 GROUP BY보다 나중에 실행된다.

---

※ SQL 실행 순서 (개념)

SQL 문법의 작성 순서와 실제 실행 순서는 다름.
FROM → WHERE → GROUP BY → HAVING → SELECT → ORDER BY